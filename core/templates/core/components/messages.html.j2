{% if messages %}
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            {% for message in messages %}
                // Use our new Bootstrap 5 toast system
                if (typeof window.NotificationManager !== 'undefined') {
                    const messageType = '{{ message.level_tag }}';
                    const messageText = '{{ message|escapejs }}';

                    const type = messageType === 'error' ? 'error' :
                        messageType === 'success' ? 'success' :
                        messageType === 'warning' ? 'warning' : 'info';

                    // Trigger toast via custom event
                    document.dispatchEvent(new CustomEvent('show-toast', {
                        detail: {
                            message: messageText,
                            type: type
                        }
                    }));
                }
            {% endfor %}
        });
    </script>
{% endif %}
