{% load static %}
<div x-cloak x-data="dangerZone()">
    <div class="tw-dangerzone-card">
        <div class="tw-card-header cursor-pointer select-none"
             role="button"
             tabindex="0"
             :aria-expanded="isExpanded"
             @click="toggle()"
             @keydown.enter.prevent="toggle()"
             @keydown.space.prevent="toggle()">
            <i class="fas fa-exclamation-triangle text-danger" aria-hidden="true"></i>
            <h4 class="text-lg font-semibold text-danger flex items-center gap-2 m-0">
                Danger Zone
                <i class="fas fa-chevron-down ml-auto text-sm transition-transform duration-200"
                   :class="isExpanded ? '' : '-rotate-90'"
                   aria-hidden="true"></i>
            </h4>
        </div>
        <div class="tw-card-body" x-show="isExpanded" x-collapse>
            <div class="flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4">
                <div class="flex items-start gap-3">
                    <div class="w-10 h-10 rounded-lg bg-danger/10 flex items-center justify-center flex-shrink-0">
                        <i class="fas fa-trash-alt text-danger" aria-hidden="true"></i>
                    </div>
                    <div>
                        <h6 class="font-semibold text-text m-0">Delete SBOM</h6>
                        <p class="text-text-muted text-sm m-0 mt-1">Permanently remove this SBOM and all its associated data</p>
                    </div>
                </div>
                <button id="del_{{ sbom_id }}"
                        class="px-4 py-2 bg-danger text-white rounded-lg font-medium hover:bg-danger/90 transition-colors flex items-center gap-2 flex-shrink-0"
                        @click="showDeleteModal = true"
                        aria-label="Delete SBOM {{ sbom_name }}">
                    <i class="fas fa-trash-alt" aria-hidden="true"></i>
                    Delete SBOM
                </button>
            </div>
        </div>
    </div>
    {% include 'components/delete_confirmation_modal.html.j2' with modal_id='showDeleteModal' title='Delete SBOM' message='Are you sure you want to delete the SBOM' item_name=sbom_name warning_message='This action cannot be undone and will permanently remove the SBOM from the system.' confirm_text='Delete SBOM' hx_url='/api/v1/sboms/sbom/'|add:sbom_id hx_method='delete' success_message='SBOM deleted successfully!' redirect_url='/component/'|add:component_id %}
</div>
