{% comment %}
   Tailwind Modal Component

   Usage with Alpine.js (recommended):
   {% include 'components/tw/modal.html.j2' with
      id='myModal'
      title='Modal Title'
      content='<p>Modal content here</p>'
      size='md'
      alpine_show='showModal'
   %}

   Sizes: sm (24rem), md (32rem, default), lg (48rem), xl (64rem)
{% endcomment %}
<template x-teleport="body">
    <div x-show="{{ alpine_show|default:'open' }}"
         x-cloak
         id="{{ id }}"
         class="fixed inset-0 z-[100]{% if class %} {{ class }}{% endif %}"
         role="dialog"
         aria-labelledby="{{ id }}-title"
         aria-modal="true"
         @keydown.escape="{{ alpine_show|default:'open' }} = false"
         {{ attrs|safe }}>
        {# Backdrop #}
        <div x-show="{{ alpine_show|default:'open' }}"
             x-transition:enter="transition ease-out duration-200"
             x-transition:enter-start="opacity-0"
             x-transition:enter-end="opacity-100"
             x-transition:leave="transition ease-in duration-150"
             x-transition:leave-start="opacity-100"
             x-transition:leave-end="opacity-0"
             class="tw-modal-overlay"
             @click="{{ alpine_show|default:'open' }} = false"></div>
        {# Modal Content #}
        <div class="tw-modal tw-modal-{{ size|default:'md' }}"
             x-show="{{ alpine_show|default:'open' }}"
             x-trap.noscroll="{{ alpine_show|default:'open' }}"
             x-transition:enter="transition ease-out duration-200"
             x-transition:enter-start="opacity-0 scale-95"
             x-transition:enter-end="opacity-100 scale-100"
             x-transition:leave="transition ease-in duration-150"
             x-transition:leave-start="opacity-100 scale-100"
             x-transition:leave-end="opacity-0 scale-95"
             @click.stop>
            <div class="tw-modal-content tw-modal-{{ size|default:'md' }}">
                {# Header #}
                {% if title %}
                    <div class="tw-modal-header">
                        {% if icon %}
                            <div class="flex items-center gap-3">
                                <div class="w-10 h-10 rounded-lg bg-primary/10 flex items-center justify-center">
                                    <i class="{{ icon }} text-primary" aria-hidden="true"></i>
                                </div>
                                <h4 id="{{ id }}-title" class="tw-modal-title">{{ title }}</h4>
                            </div>
                        {% else %}
                            <h4 id="{{ id }}-title" class="tw-modal-title">{{ title }}</h4>
                        {% endif %}
                        {% if closable != False %}
                            <button type="button"
                                    class="tw-modal-close"
                                    @click="{{ alpine_show|default:'open' }} = false"
                                    aria-label="Close">
                                <i class="fas fa-times" aria-hidden="true"></i>
                            </button>
                        {% endif %}
                    </div>
                {% endif %}
                {# Body #}
                <div class="tw-modal-body">{{ content|safe }}</div>
                {# Footer #}
                {% if footer_content %}<div class="tw-modal-footer">{{ footer_content|safe }}</div>{% endif %}
            </div>
        </div>
    </div>
</template>
