{# Toast Container - dispatch 'toast' event with {type, title, message, duration} #}
<div id="toast-container"
     x-data="{ toasts: [], counter: 0, addToast(toast) { const id = `toast-${Date.now()}-${this.counter++}`; this.toasts.push({ id, ...toast }); setTimeout(() => this.removeToast(id), toast.duration || 3000); }, removeToast(id) { this.toasts = this.toasts.filter(t => t.id !== id); } }"
     @toast.window="addToast($event.detail)"
     class="fixed top-4 right-4 z-[200] flex flex-col gap-2 pointer-events-none">
    <template x-for="toast in toasts" :key="toast.id">
        <div x-data="{ show: true }"
             x-show="show"
             x-init="setTimeout(() => show = false, (toast.duration || 3000) - 200)"
             x-transition:enter="transition ease-out duration-300"
             x-transition:enter-start="opacity-0 translate-x-8"
             x-transition:enter-end="opacity-100 translate-x-0"
             x-transition:leave="transition ease-in duration-200"
             x-transition:leave-start="opacity-100 translate-x-0"
             x-transition:leave-end="opacity-0 translate-x-8"
             class="pointer-events-auto"
             :class="{ 'tw-toast tw-toast-success': toast.type === 'success', 'tw-toast tw-toast-warning': toast.type === 'warning', 'tw-toast tw-toast-danger': toast.type === 'error', 'tw-toast tw-toast-info': !toast.type || toast.type === 'info' }">
            <i :class="{ 'fas fa-check-circle tw-toast-icon': toast.type === 'success', 'fas fa-exclamation-triangle tw-toast-icon': toast.type === 'warning', 'fas fa-times-circle tw-toast-icon': toast.type === 'error', 'fas fa-info-circle tw-toast-icon': !toast.type || toast.type === 'info' }"></i>
            <div class="tw-toast-content">
                <p class="tw-toast-title" x-text="toast.title"></p>
                <p class="tw-toast-message" x-text="toast.message"></p>
            </div>
            <button class="tw-toast-close"
                    @click="show = false; $nextTick(() => $root.removeToast(toast.id))">
                <i class="fas fa-times"></i>
            </button>
        </div>
    </template>
</div>
