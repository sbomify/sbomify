{% extends "core/component_details_private_base.html.j2" %}
{% load django_vite %}
{% block content_after_header %}
    <!-- Component Identifiers -->
    <div class="row mt-4">
        <div class="col-12">
            <div hx-get="{% url 'core:component_identifiers' component.id %}"
                 hx-trigger="load"
                 hx-swap="innerHTML">
                <div class="text-center py-4">
                    <div class="spinner-border text-primary spinner-border-sm" role="status">
                        <span class="visually-hidden">Loading...</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
{% block header_after_meta %}
    <div class="mt-3">
        <div class="standard-card p-3">
            <div>
                <span class="badge {% if component.is_global %}bg-primary-subtle text-primary{% else %}bg-secondary-subtle text-secondary{% endif %}">
                    {% if component.is_global %}
                        <i class="fas fa-building me-1"></i>Workspace-wide
                    {% else %}
                        <i class="fas fa-project-diagram me-1"></i>Project-scoped
                    {% endif %}
                </span>
                <p class="text-muted small mb-0 mt-2">
                    {% if component.is_global %}
                        Visible on the workspace Trust Center and not tied to projects.
                    {% else %}
                        Restricted to the projects this component is assigned to.
                    {% endif %}
                </p>
            </div>
        </div>
    </div>
{% endblock %}
{% block upload_section %}
    {% if component.has_crud_permissions %}
        <div class="row mt-3">
            <div class="col-12">{% include "documents/components/document_upload.html.j2" with component_id=component.id %}</div>
        </div>
    {% endif %}
{% endblock %}
{% block table_section %}
    <div class="row mt-3">
        <div class="col-12">
            <div id="documents-table-container"
                 hx-get="{% url 'documents:documents_table' component.id %}"
                 hx-trigger="load, refreshDocumentsTable from:body"
                 hx-swap="innerHTML">
                <div class="text-center py-4">
                    <div class="spinner-border text-primary" role="status">
                        <span class="visually-hidden">Loading...</span>
                    </div>
                    <p class="mt-2 text-muted">Loading documents...</p>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
{% block scripts_additional %}
    {% vite_asset 'sbomify/apps/documents/js/main.ts' %}
{% endblock %}
