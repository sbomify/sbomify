{% extends "core/component_details_private_base.html.j2" %}
{% load static %}
{% load django_vite %}
{% block extra_styles_additional %}
    <link rel="stylesheet"
          href="{% static 'css/components/vulnerability-trends.css' %}">
{% endblock %}
{% block content_after_header %}
    {% include "core/components/component_meta_info.html.j2" %}
    <!-- Vulnerability Time Series Chart -->
    <div class="row mt-4">
        <div class="col-12">
            <div hx-get="{% url 'vulnerability_scanning:vulnerability_trends' %}?component_id={{ component.id }}&hide_recent_scans=true"
                 hx-trigger="load"
                 hx-swap="innerHTML">
                <div class="text-center py-5">
                    <div class="spinner-border text-primary" role="status">
                        <span class="visually-hidden">Loading...</span>
                    </div>
                    <p class="mt-2 text-muted">Loading vulnerability trends...</p>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
{% block upload_section %}
    {% if component.has_crud_permissions %}
        <div class="row mt-4">
            <div class="col-12">{% include "sboms/components/ci_cd_info.html.j2" %}</div>
        </div>
        <div class="row mt-4">
            <div class="col-12">{% include 'sboms/components/sbom_upload.html.j2' with component_id=component.id %}</div>
        </div>
    {% endif %}
{% endblock %}
{% block table_section %}
    <div class="row mt-4">
        <div class="col-12">
            <div id="sboms-table-container"
                 hx-get="{% url 'sboms:sboms_table' component.id %}"
                 hx-trigger="load, refreshSbomsTable from:body"
                 hx-swap="innerHTML">
                <div class="text-center py-4">
                    <div class="spinner-border text-primary" role="status">
                        <span class="visually-hidden">Loading...</span>
                    </div>
                    <p class="mt-2 text-muted">Loading SBOMs...</p>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
{% block scripts_additional %}
    {% vite_asset 'sbomify/apps/sboms/js/main.ts' %}
{% endblock %}
