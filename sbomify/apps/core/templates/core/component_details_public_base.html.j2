{% extends "core/public_base.htmx.j2" %}
{% load breadcrumb_tags %}
{% load django_vite %}
{% load static %}
{% block title %}{{ component.name }} - {{ component.component_type_display }}{% endblock %}
{% block meta_description %}
    {{ component.name }} - {{ component.component_type_display }} component.
    {% block meta_description_suffix %}{% endblock %}
{% endblock %}
{% block og_title %}{{ component.name }} - {{ component.component_type_display }}{% endblock %}
{% block og_description %}
    {{ component.name }} - {{ component.component_type_display }} component. View and download security artifacts.
{% endblock %}
{% block breadcrumb %}
    {% breadcrumb component 'component' %}
{% endblock %}
{% block content %}
    <div class="public-item-header">
        {% if parent_product_url %}
            <a href="{{ parent_product_url }}" class="back-link">
                <i class="fas fa-arrow-left"></i>Back to {{ parent_product.name }}
            </a>
        {% elif workspace_public_url and component.is_global %}
            <a href="{{ workspace_public_url }}" class="back-link">
                <i class="fas fa-arrow-left"></i>Back to Trust Center
            </a>
        {% endif %}
        <h1 class="public-item-title">
            <span class="public-item-title-icon icon-component">
                <i class="fas fa-cube"></i>
            </span>
            {{ component.name }}
        </h1>
        <div class="public-item-badges">
            <span class="public-badge badge-type">
                <i class="fas fa-tag"></i>
                {{ component.component_type_display }}
            </span>
            {% if component.is_global %}
                <span class="public-badge badge-workspace">
                    <i class="fas fa-building"></i>
                    Workspace-wide
                </span>
            {% endif %}
            {% for assessment in passing_assessments %}
                <span class="public-badge badge-compliance"
                      title="{{ assessment.display_name }}: All checks passed">
                    <i class="fas fa-check-circle"></i>
                    {{ assessment.display_name }}
                </span>
            {% endfor %}
        </div>
    </div>
    <!-- Component Identifiers (public view) -->
    <div class="public-section">
        <div hx-get="{% url 'core:component_identifiers' component.id %}"
             hx-trigger="load"
             hx-swap="innerHTML">
            <div class="text-center py-4">
                <div class="spinner-border text-primary spinner-border-sm" role="status">
                    <span class="visually-hidden">Loading...</span>
                </div>
            </div>
        </div>
    </div>
    <div class="public-section">
        <div class="card">
            <div class="card-header">
                <h4 class="card-title">
                    {% block table_icon %}<i class="fas fa-list"></i>{% endblock %}
                    {{ component.component_type_display }} Items
                </h4>
            </div>
            <div class="card-body">
                {% block table_section %}{% endblock %}
            </div>
        </div>
    </div>
{% endblock %}
{% block scripts %}
    {% vite_asset 'sbomify/apps/core/js/main.ts' %}
    {% block scripts_additional %}{% endblock %}
{% endblock %}
