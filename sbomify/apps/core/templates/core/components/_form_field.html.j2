{# 
  Form Field Wrapper Partial
  
  Usage with Django form field:
  {% include "core/components/_form_field.html.j2" with 
      field=form.email 
      help_text="Enter your work email address"
  %}
  
  Parameters:
  - field: Django form field object (required)
  - help_text: Optional help text (overrides field.help_text)
  - label_class: Additional classes for label
  - input_class: Additional classes for input (added to form-control)
  - required: Force required display (uses field.required by default)
  - horizontal: Set to true for horizontal form layout
  - label_cols: Column width for label in horizontal layout (default: 3)
  - input_cols: Column width for input in horizontal layout (default: 9)
#}
{% load widget_tweaks %}
{% if horizontal %}
    <div class="row mb-3">
        <label for="{{ field.id_for_label }}"
               class="col-sm-{{ label_cols|default:3 }} col-form-label {{ label_class }}">
            {{ field.label }}
            {% if required|default:field.required %}<span class="text-danger" aria-hidden="true">*</span>{% endif %}
        </label>
        <div class="col-sm-{{ input_cols|default:9 }}">
            {{ field|add_class:"form-control"|add_class:input_class }}
            {% if help_text or field.help_text %}
                <div id="{{ field.id_for_label }}-help" class="form-text">{{ help_text|default:field.help_text }}</div>
            {% endif %}
            {% if field.errors %}
                <div class="invalid-feedback d-block" role="alert">
                    {% for error in field.errors %}
                        {{ error }}
                        {% if not forloop.last %}{% endif %}
                    {% endfor %}
                </div>
            {% endif %}
        </div>
    </div>
{% else %}
    <div class="mb-3 form-field-wrapper">
        <label for="{{ field.id_for_label }}" class="form-label {{ label_class }}">
            {{ field.label }}
            {% if required|default:field.required %}<span class="text-danger" aria-hidden="true">*</span>{% endif %}
        </label>
        {% if field.field.widget.input_type == 'select' %}
            {{ field|add_class:"form-select"|add_class:input_class }}
        {% elif field.field.widget.input_type == 'checkbox' %}
            <div class="form-check">{{ field|add_class:"form-check-input"|add_class:input_class }}</div>
        {% else %}
            {{ field|add_class:"form-control"|add_class:input_class }}
        {% endif %}
        {% if help_text or field.help_text %}
            <div id="{{ field.id_for_label }}-help" class="form-text">{{ help_text|default:field.help_text }}</div>
        {% endif %}
        {% if field.errors %}
            <div class="invalid-feedback d-block" role="alert">
                {% for error in field.errors %}
                    {{ error }}
                    {% if not forloop.last %}{% endif %}
                {% endfor %}
            </div>
        {% endif %}
    </div>
{% endif %}
