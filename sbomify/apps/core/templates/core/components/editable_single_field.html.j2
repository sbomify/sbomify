<span x-data="editableSingleField({ itemType: '{{ item_type }}', itemId: '{{ item_id }}', itemValue: '{{ item_value|escapejs }}', fieldName: '{{ field_name|default:"name" }}', fieldType: '{{ field_type|default:"text" }}', displayValue: '{{ display_value|default:""|escapejs }}', placeholder: '{{ placeholder|default:""|escapejs }}' })">
    <template x-if="isEditing">
        <span :class="{ 'block': isTextarea }"
              class="inline-flex items-center gap-1">
            <template x-if="isTextarea">
                <textarea x-model="fieldValue"
                          class="tw-form-input text-sm"
                          :placeholder="placeholder"
                          rows="3"
                          @keyup.escape="cancelEdit()"></textarea>
            </template>
            <template x-if="!isTextarea">
                <input x-model="fieldValue"
                       :type="inputType"
                       class="px-2 py-1 text-sm bg-surface border border-border rounded text-text focus:outline-none focus:ring-2 focus:ring-primary/50"
                       @keyup.enter="updateField()"
                       @keyup.escape="cancelEdit()">
            </template>
            <button class="p-1.5 rounded text-success hover:bg-success/10 transition-colors"
                    title="Save"
                    aria-label="Save"
                    @click="updateField()">
                <i class="fas fa-check" aria-hidden="true"></i>
            </button>
            <button class="p-1.5 rounded text-danger hover:bg-danger/10 transition-colors"
                    title="Cancel"
                    aria-label="Cancel"
                    @click="cancelEdit()">
                <i class="fas fa-times" aria-hidden="true"></i>
            </button>
        </span>
    </template>
    <template x-if="!isEditing">
        <span class="inline-flex items-center gap-1 cursor-pointer group"
              role="button"
              tabindex="0"
              @click="startEdit()"
              @keydown.enter.prevent="startEdit()">
            <span :class="{ 'text-text-muted italic': !displayText }"
                  x-text="displayText || placeholder"></span>
            <i class="fas fa-edit text-sm text-text-muted group-hover:text-primary transition-colors"
               aria-hidden="true"></i>
        </span>
    </template>
    <span x-show="errorMessage"
          x-text="errorMessage"
          class="text-danger text-sm mt-1 block"></span>
</span>
