{% extends "core/base.html.j2" %}
{% load static %}
{% load django_vite %}
{% block title %}Get Started - sbomify{% endblock %}
{% block styles %}
    <style>
        .onboarding-bg {
            background:
                radial-gradient(ellipse 80% 60% at 50% 0%, rgb(var(--color-primary) / 0.08) 0%, transparent 60%),
                radial-gradient(ellipse 50% 40% at 80% 100%, rgb(var(--color-primary) / 0.04) 0%, transparent 50%),
                rgb(var(--color-background));
        }
        :root.light .onboarding-bg {
            background:
                radial-gradient(ellipse 80% 60% at 50% 0%, rgb(var(--color-primary) / 0.06) 0%, transparent 60%),
                radial-gradient(ellipse 50% 40% at 80% 100%, rgb(var(--color-primary) / 0.03) 0%, transparent 50%),
                rgb(var(--color-background));
        }
        .step-dot {
            width: 8px;
            height: 8px;
            border-radius: 9999px;
            background-color: rgb(var(--color-border));
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .step-dot.active {
            width: 28px;
            background-color: rgb(var(--color-primary));
        }
        .step-dot.completed {
            background-color: rgb(var(--color-success));
        }
        .onboarding-card {
            border: 1px solid rgb(var(--color-border) / 0.6);
            box-shadow:
                0 4px 24px -4px rgb(0 0 0 / 0.12),
                0 0 0 1px rgb(var(--color-border) / 0.3);
        }
        :root.dark .onboarding-card {
            box-shadow:
                0 8px 32px -4px rgb(0 0 0 / 0.4),
                0 0 0 1px rgb(255 255 255 / 0.04);
        }
        .success-ring {
            animation: success-pulse 2s ease-out 0.8s;
        }
        @keyframes success-pulse {
            0% { box-shadow: 0 0 0 0 rgb(var(--color-success) / 0.4); }
            70% { box-shadow: 0 0 0 16px rgb(var(--color-success) / 0); }
            100% { box-shadow: 0 0 0 0 rgb(var(--color-success) / 0); }
        }
        .plan-card {
            border: 1px solid rgb(var(--color-border) / 0.6);
            box-shadow:
                0 4px 24px -4px rgb(0 0 0 / 0.12),
                0 0 0 1px rgb(var(--color-border) / 0.3);
            transition: all 0.2s ease;
        }
        .plan-card:hover,
        .plan-card.selected {
            border-color: rgb(var(--color-primary));
            box-shadow:
                0 4px 24px -4px rgb(0 0 0 / 0.12),
                0 0 0 2px rgb(var(--color-primary) / 0.3);
        }
        :root.dark .plan-card {
            box-shadow:
                0 8px 32px -4px rgb(0 0 0 / 0.4),
                0 0 0 1px rgb(255 255 255 / 0.04);
        }
        @media (prefers-reduced-motion: reduce) {
            .step-dot { transition: none; }
            .success-ring { animation: none; }
        }
    </style>
{% endblock %}
{% block main %}
    <div class="onboarding-bg min-h-screen flex flex-col items-center justify-center px-4 py-12 sm:py-16">
        <!-- Logo -->
        <div class="flex items-center justify-center gap-3 mb-10">
            <img src="{% static 'img/sbomify-icon.svg' %}"
                 alt=""
                 class="h-8 w-8"
                 width="32"
                 height="32">
            <span class="text-2xl font-bold text-text tracking-tight">sbomify</span>
        </div>
        <!-- Step Progress (3 dots without billing, 4 with billing) -->
        <div class="flex items-center gap-2 mb-8">
            {# Dot 1: Welcome #}
            <div class="step-dot {% if current_step == 'welcome' %}active{% elif current_step == 'setup' or current_step == 'complete' or current_step == 'plan' %}completed{% endif %}">
            </div>
            {# Dot 2: Setup #}
            <div class="step-dot {% if current_step == 'setup' %}active{% elif current_step == 'complete' or current_step == 'plan' %}completed{% endif %}">
            </div>
            {# Dot 3: Complete #}
            <div class="step-dot {% if current_step == 'complete' %}active{% elif current_step == 'plan' %}completed{% endif %}">
            </div>
            {# Dot 4: Plan (only when billing enabled) #}
            {% if billing_enabled %}
                <div class="step-dot {% if current_step == 'plan' %}active{% endif %}"></div>
            {% endif %}
        </div>
        {% if current_step == 'welcome' %}
            <!-- Welcome Step -->
            <div class="w-full max-w-md"
                 x-data="{ show: false }"
                 x-init="setTimeout(() => show = true, 80)">
                <div class="onboarding-card bg-surface rounded-2xl overflow-hidden"
                     x-show="show"
                     x-transition:enter="transition ease-out duration-500"
                     x-transition:enter-start="opacity-0 translate-y-3"
                     x-transition:enter-end="opacity-100 translate-y-0">
                    <div class="px-8 sm:px-10 pt-10 sm:pt-12 pb-8 sm:pb-10 text-center">
                        <h1 class="font-display text-2xl sm:text-3xl font-bold text-text mb-3 tracking-tight">Welcome, {{ first_name }}</h1>
                        <p class="text-text-muted text-sm sm:text-base leading-relaxed mb-8">
                            Know exactly what's inside your software â€” and keep it secure.
                        </p>
                        <!-- Value highlights -->
                        <div class="flex flex-col gap-3 mb-8 text-left">
                            <div class="flex items-center gap-3">
                                <div class="w-8 h-8 rounded-lg bg-primary/10 flex items-center justify-center shrink-0">
                                    <i class="fas fa-upload text-primary text-xs"></i>
                                </div>
                                <span class="text-text-secondary text-sm">See every component in your software supply chain</span>
                            </div>
                            <div class="flex items-center gap-3">
                                <div class="w-8 h-8 rounded-lg bg-primary/10 flex items-center justify-center shrink-0">
                                    <i class="fas fa-search text-primary text-xs"></i>
                                </div>
                                <span class="text-text-secondary text-sm">Find vulnerabilities before they become problems</span>
                            </div>
                            <div class="flex items-center gap-3">
                                <div class="w-8 h-8 rounded-lg bg-primary/10 flex items-center justify-center shrink-0">
                                    <i class="fas fa-check-circle text-primary text-xs"></i>
                                </div>
                                <span class="text-text-secondary text-sm">Stay compliant with security standards</span>
                            </div>
                        </div>
                        <a href="{% url 'teams:onboarding_wizard' %}?step=setup"
                           class="btn-primary-action flex items-center justify-center gap-2.5 w-full py-3.5 px-4 text-base font-semibold rounded-xl no-underline">
                            Get Started
                            <i class="fas fa-arrow-right text-sm"></i>
                        </a>
                    </div>
                </div>
                <p class="text-center text-text-muted/60 text-xs mt-6">Takes about 2 minutes</p>
            </div>
        {% elif current_step == 'setup' %}
            <!-- Setup Step -->
            <div class="w-full max-w-md"
                 x-data="onboardingWizard({ initialEmail: '{{ form.email.value|default:''|escapejs }}', initialContactName: '{{ form.contact_name.value|default:''|escapejs }}' })">
                <div class="onboarding-card bg-surface rounded-2xl overflow-hidden">
                    <div class="px-8 sm:px-10 pt-8 sm:pt-10 pb-6 sm:pb-8">
                        <!-- Header -->
                        <div class="mb-8">
                            <p class="text-primary text-xs font-semibold uppercase tracking-widest mb-2">
                                Step 1 of
                                {% if billing_enabled %}
                                    3
                                {% else %}
                                    2
                                {% endif %}
                            </p>
                            <h1 class="font-display text-2xl font-bold text-text mb-1.5 tracking-tight">Create your workspace</h1>
                            <p class="text-text-muted text-sm">Tell us about your organization. You can change this later.</p>
                        </div>
                        <form method="post"
                              action="{% url 'teams:onboarding_wizard' %}"
                              @submit="handleSubmit()">
                            {% csrf_token %}
                            {% if form.non_field_errors %}
                                <div class="tw-form-error mb-6" role="alert">
                                    {% for error in form.non_field_errors %}{{ error }}{% endfor %}
                                </div>
                            {% endif %}
                            <div class="space-y-5">
                                <!-- Company Name -->
                                <div>
                                    <label for="id_company_name" class="tw-form-label tw-form-label-required">Company name</label>
                                    <input type="text"
                                           class="tw-form-input"
                                           id="id_company_name"
                                           name="company_name"
                                           placeholder="e.g., Acme Corporation"
                                           required
                                           minlength="2"
                                           maxlength="200"
                                           autocomplete="organization"
                                           autofocus
                                           x-model="companyName"
                                           @blur="markTouched('companyName')"
                                           :class="getValidationClass('companyName')"
                                           {% if form.company_name.value %}value="{{ form.company_name.value }}"{% endif %}>
                                    {% if form.company_name.errors %}
                                        <div class="tw-form-error">
                                            {% for error in form.company_name.errors %}{{ error }}{% endfor %}
                                        </div>
                                    {% endif %}
                                    <p class="tw-form-helper">Used to name your workspace and Trust Center.</p>
                                </div>
                                <!-- Contact Name -->
                                <div>
                                    <label for="id_contact_name" class="tw-form-label tw-form-label-required">Your name</label>
                                    <input type="text"
                                           class="tw-form-input"
                                           id="id_contact_name"
                                           name="contact_name"
                                           placeholder="e.g., Jane Smith"
                                           required
                                           minlength="2"
                                           maxlength="150"
                                           autocomplete="name"
                                           x-model="contactName"
                                           @blur="markTouched('contactName')"
                                           :class="getValidationClass('contactName')"
                                           {% if form.contact_name.value %}value="{{ form.contact_name.value }}"{% endif %}>
                                    {% if form.contact_name.errors %}
                                        <div class="tw-form-error">
                                            {% for error in form.contact_name.errors %}{{ error }}{% endfor %}
                                        </div>
                                    {% endif %}
                                    <p class="tw-form-helper">Required for NTIA compliance. Person responsible for SBOM inquiries.</p>
                                </div>
                                <!-- Email -->
                                <div>
                                    <label for="id_email" class="tw-form-label">Work email</label>
                                    <input type="email"
                                           class="tw-form-input"
                                           id="id_email"
                                           name="email"
                                           placeholder="security@example.com"
                                           maxlength="254"
                                           autocomplete="email"
                                           x-model="email"
                                           @blur="markTouched('email')"
                                           :class="getValidationClass('email')"
                                           {% if form.email.value %}value="{{ form.email.value }}"{% endif %}>
                                    {% if form.email.errors %}
                                        <div class="tw-form-error">
                                            {% for error in form.email.errors %}{{ error }}{% endfor %}
                                        </div>
                                    {% endif %}
                                    <p class="tw-form-helper">Embedded in SBOM metadata for security inquiries.</p>
                                </div>
                                <!-- Website -->
                                <div>
                                    <label for="id_website" class="tw-form-label">
                                        Website <span class="text-text-muted font-normal text-xs">(optional)</span>
                                    </label>
                                    <input type="url"
                                           class="tw-form-input"
                                           id="id_website"
                                           name="website"
                                           placeholder="https://example.com"
                                           maxlength="500"
                                           autocomplete="url"
                                           pattern="https?://.+"
                                           x-model="website"
                                           @blur="markTouched('website')"
                                           :class="getValidationClass('website')"
                                           {% if form.website.value %}value="{{ form.website.value }}"{% endif %}>
                                    {% if form.website.errors %}
                                        <div class="tw-form-error">
                                            {% for error in form.website.errors %}{{ error }}{% endfor %}
                                        </div>
                                    {% endif %}
                                    <p class="tw-form-helper">Added to SBOM external references.</p>
                                </div>
                                <!-- Goal -->
                                <div>
                                    <label for="id_goal" class="tw-form-label">
                                        What are you trying to accomplish? <span class="text-text-muted font-normal text-xs">(optional)</span>
                                    </label>
                                    <textarea class="tw-form-input"
                                              id="id_goal"
                                              name="goal"
                                              rows="3"
                                              maxlength="1000"
                                              placeholder="e.g., Track open source dependencies, meet compliance requirements...">{% if form.goal.value %}{{ form.goal.value }}{% endif %}</textarea>
                                    {% if form.goal.errors %}
                                        <div class="tw-form-error">
                                            {% for error in form.goal.errors %}{{ error }}{% endfor %}
                                        </div>
                                    {% endif %}
                                    <p class="tw-form-helper">Helps us tailor your experience.</p>
                                </div>
                            </div>
                            <!-- Auto-create note -->
                            <div class="flex items-start gap-2.5 mt-6 p-3 rounded-lg bg-primary/5 border border-primary/10">
                                <i class="fas fa-magic text-primary/60 text-xs mt-0.5"></i>
                                <p class="text-xs text-text-muted leading-relaxed">
                                    We'll set up a sample product, project, and component so you can start exploring right away.
                                </p>
                            </div>
                            <!-- Footer -->
                            <div class="flex items-center justify-between mt-8 pt-6 border-t border-border/50">
                                <a href="{% url 'teams:onboarding_wizard' %}"
                                   class="text-sm text-text-muted hover:text-text no-underline transition-colors flex items-center gap-1.5">
                                    <i class="fas fa-arrow-left text-xs"></i> Back
                                </a>
                                <button type="submit"
                                        class="btn-primary-action py-2.5 px-8 text-sm font-semibold rounded-xl disabled:opacity-50 disabled:cursor-not-allowed"
                                        :disabled="!canSubmit">
                                    <span x-show="!isSubmitting" class="flex items-center gap-2">
                                        Create Workspace
                                        <i class="fas fa-arrow-right text-xs"></i>
                                    </span>
                                    <span x-show="isSubmitting" x-cloak class="flex items-center gap-2">
                                        <i class="fas fa-circle-notch animate-spin"></i>
                                        Creating...
                                    </span>
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        {% elif current_step == 'complete' %}
            <!-- Success Step -->
            <div class="w-full max-w-md"
                 x-data="{ show: false }"
                 x-init="setTimeout(() => show = true, 80)">
                <div class="onboarding-card bg-surface rounded-2xl overflow-hidden"
                     x-show="show"
                     x-transition:enter="transition ease-out duration-500"
                     x-transition:enter-start="opacity-0 translate-y-3"
                     x-transition:enter-end="opacity-100 translate-y-0">
                    <div class="px-8 sm:px-10 pt-10 sm:pt-12 pb-8 sm:pb-10">
                        <!-- Animated checkmark -->
                        <div class="text-center">
                            <div class="relative mx-auto mb-8 w-20 h-20"
                                 x-data="{ scaled: false }"
                                 x-init="setTimeout(() => scaled = true, 250)">
                                <div class="absolute inset-0 rounded-full bg-success/10 success-ring"></div>
                                <div class="absolute inset-0 flex items-center justify-center rounded-full bg-success/10 transition-transform duration-500 ease-out"
                                     :class="scaled ? 'scale-100' : 'scale-0'">
                                    <i class="fas fa-check text-success text-3xl"></i>
                                </div>
                            </div>
                            <h1 class="font-display text-2xl sm:text-3xl font-bold text-text mb-3 tracking-tight">Your workspace is ready!</h1>
                            <p class="text-text-muted text-sm sm:text-base leading-relaxed mb-8">
                                <strong class="text-text font-medium">{{ company_name }}</strong> is set up. Let's explore what sbomify can do for you.
                            </p>
                        </div>
                        <!-- Onboarding checklist -->
                        <div class="rounded-xl border border-border/50 divide-y divide-border/50 mb-8">
                            <div class="flex items-center gap-3 px-4 py-3">
                                <div class="w-5 h-5 rounded-full bg-success/20 flex items-center justify-center shrink-0">
                                    <i class="fas fa-check text-success text-[10px]"></i>
                                </div>
                                <span class="text-sm text-text-muted line-through">Create workspace</span>
                            </div>
                            <div class="flex items-center gap-3 px-4 py-3">
                                <div class="w-5 h-5 rounded-full border-2 border-primary shrink-0"></div>
                                <span class="text-sm text-text">Explore with a sample project</span>
                            </div>
                            <div class="flex items-center gap-3 px-4 py-3">
                                <div class="w-5 h-5 rounded-full border-2 border-border shrink-0"></div>
                                <span class="text-sm text-text-muted">See your first security insights</span>
                            </div>
                        </div>
                        <!-- Actions -->
                        <a href="{{ next_url|default:'/dashboard' }}"
                           class="btn-primary-action flex items-center justify-center gap-2.5 w-full py-3.5 px-4 text-base font-semibold rounded-xl no-underline mb-3">
                            Continue
                            <i class="fas fa-arrow-right text-sm"></i>
                        </a>
                    </div>
                </div>
            </div>
        {% elif current_step == 'plan' %}
            <!-- Plan Selection Step -->
            {{ plans|json_script:"plans-data" }}
            <div class="w-full max-w-5xl"
                 x-data="{ selectedPlan: '{{ plan_hint|default:'' }}', billingPeriod: 'monthly', plans: [], init() { this.plans = window.parseJsonScript('plans-data') || []; }, get selectedPlanData() { return this.plans.find(p => p.key === this.selectedPlan) || null; }, formatPrice(plan) { if (plan.key === 'community') return '$0'; if (plan.key === 'enterprise') return 'Custom'; const price = this.billingPeriod === 'monthly' ? (plan.monthly_price_discounted || plan.monthly_price) : (plan.annual_price_discounted || plan.annual_price); if (!price) return 'Contact us'; return '$' + Math.round(price).toLocaleString(); }, priceLabel(plan) { if (plan.key === 'community') return '/forever'; if (plan.key === 'enterprise') return 'pricing'; return this.billingPeriod === 'monthly' ? '/month' : '/year'; }, monthlyEquiv(plan) { if (this.billingPeriod !== 'annual' || plan.key !== 'business') return ''; const price = plan.annual_price_discounted || plan.annual_price; if (!price) return ''; return '$' + Math.round(price / 12).toLocaleString() + '/mo billed annually'; } }">
                {# Heading #}
                <div class="text-center mb-8">
                    <p class="text-primary text-xs font-semibold uppercase tracking-widest mb-2">Step 3 of 3</p>
                    <h1 class="font-display text-2xl sm:text-3xl font-bold text-text mb-3 tracking-tight">Choose Your Plan</h1>
                    <p class="text-text-muted text-sm sm:text-base max-w-lg mx-auto leading-relaxed">
                        Start free and upgrade when you need more. All plans include unlimited SBOMs.
                    </p>
                </div>
                {# Billing Toggle #}
                <div class="flex items-center justify-center gap-4 mb-10">
                    <span class="text-sm font-medium transition-colors"
                          :class="billingPeriod === 'monthly' ? 'text-text' : 'text-text-muted'">Monthly</span>
                    <button @click="billingPeriod = billingPeriod === 'monthly' ? 'annual' : 'monthly'"
                            class="relative w-14 h-7 rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 border border-border"
                            :class="billingPeriod === 'annual' ? 'bg-primary border-primary' : 'bg-text-muted/20'"
                            role="switch"
                            :aria-checked="billingPeriod === 'annual'">
                        <span class="absolute top-1 left-1 w-5 h-5 rounded-full bg-white shadow-md border border-border/50 transition-transform"
                              :class="billingPeriod === 'annual' ? 'translate-x-7' : 'translate-x-0'"></span>
                    </button>
                    <span class="text-sm font-medium transition-colors flex items-center gap-2"
                          :class="billingPeriod === 'annual' ? 'text-text' : 'text-text-muted'">
                        Annual
                        <template x-for="plan in plans.filter(p => p.key === 'business' && p.annual_savings_percent)"
                                  :key="plan.key">
                            <span class="inline-flex items-center px-2 py-0.5 text-xs font-semibold rounded-full bg-success/10 text-success"
                                  x-text="'Save ' + Math.round(plan.annual_savings_percent) + '%'"></span>
                        </template>
                    </span>
                </div>
                {# Plan Cards #}
                <div class="grid md:grid-cols-3 gap-6 w-full mb-10">
                    <template x-for="plan in plans" :key="plan.key">
                        <div class="plan-card bg-surface rounded-2xl overflow-hidden relative cursor-pointer"
                             :class="{ 'selected': selectedPlan === plan.key }"
                             @click="selectedPlan = plan.key">
                            {# Popular badge for business #}
                            <template x-if="plan.key === 'business'">
                                <div class="absolute -top-0 left-0 right-0 bg-primary text-white text-xs font-semibold text-center py-1.5 rounded-t-2xl flex items-center justify-center gap-1.5">
                                    <i class="fas fa-star text-[10px]"></i>
                                    Most Popular
                                </div>
                            </template>
                            <div class="p-6 sm:p-8" :class="plan.key === 'business' ? 'pt-12' : ''">
                                {# Selection radio #}
                                <div class="flex items-center justify-between mb-4">
                                    <h3 class="text-xl font-bold text-text" x-text="plan.name"></h3>
                                    <div class="w-5 h-5 rounded-full border-2 flex items-center justify-center transition-colors"
                                         :class="selectedPlan === plan.key ? 'border-primary bg-primary' : 'border-border'">
                                        <i class="fas fa-check text-white text-[10px]"
                                           x-show="selectedPlan === plan.key"
                                           x-transition></i>
                                    </div>
                                </div>
                                {# Price #}
                                <div class="mb-4">
                                    <span class="text-3xl font-bold text-text" x-text="formatPrice(plan)"></span>
                                    <span class="text-text-muted text-sm" x-text="priceLabel(plan)"></span>
                                    <template x-if="monthlyEquiv(plan)">
                                        <div class="text-xs text-text-muted mt-1" x-text="monthlyEquiv(plan)"></div>
                                    </template>
                                </div>
                                {# Description #}
                                <p class="text-sm text-text-muted mb-5" x-text="plan.description || ''"></p>
                                {# CTA label #}
                                <div class="text-sm font-semibold mb-5"
                                     :class="plan.key === 'business' ? 'text-primary' : 'text-text-secondary'">
                                    <template x-if="plan.key === 'community'">
                                        <span>Free forever</span>
                                    </template>
                                    <template x-if="plan.key === 'business'">
                                        <span>Start {{ trial_days }}-day free trial</span>
                                    </template>
                                    <template x-if="plan.key === 'enterprise'">
                                        <span>Contact Sales</span>
                                    </template>
                                </div>
                                {# Limits #}
                                <div class="space-y-2 mb-5 p-3 bg-background rounded-lg">
                                    <h6 class="text-xs font-semibold text-text-muted uppercase tracking-wider mb-2">Plan Limits</h6>
                                    <div class="flex items-center gap-2">
                                        <i class="fas fa-cube text-primary text-xs w-4"></i>
                                        <span class="text-sm text-text"
                                              x-text="plan.max_products ? plan.max_products + ' Products' : 'Unlimited Products'"></span>
                                    </div>
                                    <div class="flex items-center gap-2">
                                        <i class="fas fa-folder text-primary text-xs w-4"></i>
                                        <span class="text-sm text-text"
                                              x-text="plan.max_projects ? plan.max_projects + ' Projects' : 'Unlimited Projects'"></span>
                                    </div>
                                    <div class="flex items-center gap-2">
                                        <i class="fas fa-puzzle-piece text-primary text-xs w-4"></i>
                                        <span class="text-sm text-text"
                                              x-text="plan.max_components ? plan.max_components + ' Components' : 'Unlimited Components'"></span>
                                    </div>
                                </div>
                                {# Features #}
                                <div class="space-y-2">
                                    <template x-if="plan.key === 'community'">
                                        <ul class="space-y-1.5">
                                            <li class="flex items-start gap-2 text-sm text-text">
                                                <i class="fas fa-check text-success mt-0.5 text-xs"></i>
                                                <span>Unlimited SBOMs</span>
                                            </li>
                                            <li class="flex items-start gap-2 text-sm text-text">
                                                <i class="fas fa-check text-success mt-0.5 text-xs"></i>
                                                <span>Public Trust Center</span>
                                            </li>
                                            <li class="flex items-start gap-2 text-sm text-text">
                                                <i class="fas fa-check text-success mt-0.5 text-xs"></i>
                                                <span>Weekly vulnerability scans</span>
                                            </li>
                                            <li class="flex items-start gap-2 text-sm text-text">
                                                <i class="fas fa-check text-success mt-0.5 text-xs"></i>
                                                <span>API access</span>
                                            </li>
                                        </ul>
                                    </template>
                                    <template x-if="plan.key === 'business'">
                                        <ul class="space-y-1.5">
                                            <li class="text-xs font-semibold text-primary uppercase tracking-wider mb-1">Everything in Community, plus:</li>
                                            <li class="flex items-start gap-2 text-sm text-text">
                                                <i class="fas fa-check text-success mt-0.5 text-xs"></i>
                                                <span>Private components & projects</span>
                                            </li>
                                            <li class="flex items-start gap-2 text-sm text-text">
                                                <i class="fas fa-check text-success mt-0.5 text-xs"></i>
                                                <span>NTIA compliance checks</span>
                                            </li>
                                            <li class="flex items-start gap-2 text-sm text-text">
                                                <i class="fas fa-check text-success mt-0.5 text-xs"></i>
                                                <span>Advanced vulnerability scanning</span>
                                            </li>
                                            <li class="flex items-start gap-2 text-sm text-text">
                                                <i class="fas fa-check text-success mt-0.5 text-xs"></i>
                                                <span>Priority support</span>
                                            </li>
                                        </ul>
                                    </template>
                                    <template x-if="plan.key === 'enterprise'">
                                        <ul class="space-y-1.5">
                                            <li class="text-xs font-semibold text-primary uppercase tracking-wider mb-1">Everything in Business, plus:</li>
                                            <li class="flex items-start gap-2 text-sm text-text">
                                                <i class="fas fa-check text-success mt-0.5 text-xs"></i>
                                                <span>Custom integrations</span>
                                            </li>
                                            <li class="flex items-start gap-2 text-sm text-text">
                                                <i class="fas fa-check text-success mt-0.5 text-xs"></i>
                                                <span>SLA guarantee</span>
                                            </li>
                                            <li class="flex items-start gap-2 text-sm text-text">
                                                <i class="fas fa-check text-success mt-0.5 text-xs"></i>
                                                <span>Dedicated support</span>
                                            </li>
                                            <li class="flex items-start gap-2 text-sm text-text">
                                                <i class="fas fa-check text-success mt-0.5 text-xs"></i>
                                                <span>Custom deployment options</span>
                                            </li>
                                        </ul>
                                    </template>
                                </div>
                            </div>
                        </div>
                    </template>
                </div>
                {# Submit Form #}
                <form method="post"
                      action="{% url 'teams:onboarding_wizard' %}"
                      class="w-full max-w-md mx-auto">
                    {% csrf_token %}
                    <input type="hidden" name="plan" :value="selectedPlan">
                    <button type="submit"
                            class="btn-primary-action flex items-center justify-center gap-2.5 w-full py-3.5 px-4 text-base font-semibold rounded-xl disabled:opacity-50 disabled:cursor-not-allowed"
                            :disabled="!selectedPlan">
                        <span x-show="selectedPlan === 'business'">Start Free Trial</span>
                        <span x-show="selectedPlan === 'enterprise'">Contact Sales</span>
                        <span x-show="selectedPlan === 'community'">Continue with Community</span>
                        <span x-show="!selectedPlan">Select a plan to continue</span>
                        <i class="fas fa-arrow-right text-sm" x-show="selectedPlan"></i>
                    </button>
                </form>
                <p class="text-center text-text-muted/60 text-xs mt-6">You can change your plan anytime from workspace settings.</p>
            </div>
        {% endif %}
    </div>
{% endblock %}
{% block scripts %}
    {% vite_asset 'sbomify/apps/teams/js/main.ts' %}
{% endblock %}
