<div x-show="totalPages > 1"
     x-cloak
     class="mt-4 pt-4 border-t border-border">
    <div class="flex flex-col md:flex-row justify-between items-center gap-4">
        <div class="flex items-center gap-4">
            <span class="text-sm text-text-muted">
                Showing <span x-text="startItem"></span>-<span x-text="endItem"></span> of <span x-text="totalItems"></span> items
            </span>
            <div x-show="pageSizeOptions && pageSizeOptions.length > 0"
                 x-cloak
                 class="flex items-center gap-2">
                <label for="{{ pagination_id|default:'pagination' }}-page-size"
                       class="text-sm text-text-muted">Items per page:</label>
                <select id="{{ pagination_id|default:'pagination' }}-page-size"
                        x-model="pageSize"
                        @change="handlePageSizeChange($event)"
                        class="px-3 py-1.5 text-sm bg-surface border border-border rounded-lg text-text focus:outline-none focus:ring-2 focus:ring-primary/50">
                    <template x-for="size in pageSizeOptions" :key="size">
                        <option :value="size" x-text="size"></option>
                    </template>
                </select>
            </div>
        </div>
        <nav aria-label="Pagination" class="flex items-center gap-1">
            <button type="button"
                    class="px-3 py-1.5 text-sm rounded-lg transition-colors"
                    :class="currentPage === 1 ? 'text-text-muted cursor-not-allowed' : 'text-text hover:bg-border/30'"
                    :disabled="currentPage === 1"
                    @click="goToPage(1)"
                    aria-label="First page">First</button>
            <button type="button"
                    class="px-3 py-1.5 text-sm rounded-lg transition-colors"
                    :class="currentPage === 1 ? 'text-text-muted cursor-not-allowed' : 'text-text hover:bg-border/30'"
                    :disabled="currentPage === 1"
                    @click="goToPage(currentPage - 1)"
                    aria-label="Previous page">Previous</button>
            <template x-for="page in visiblePages" :key="page">
                <template x-if="page === '...'">
                    <span class="px-3 py-1.5 text-sm text-text-muted">
                        <span aria-hidden="true" x-text="ellipsis"></span>
                        <span class="sr-only">Pages skipped</span>
                    </span>
                </template>
                <template x-if="page !== '...'">
                    <button type="button"
                            class="px-3 py-1.5 text-sm rounded-lg transition-colors"
                            :class="page === currentPage ? 'bg-primary text-white' : 'text-text hover:bg-border/30'"
                            @click="goToPage(page)"
                            :aria-label="`Go to page ${page}`"
                            :aria-current="page === currentPage ? 'page' : null"
                            x-text="page"></button>
                </template>
            </template>
            <button type="button"
                    class="px-3 py-1.5 text-sm rounded-lg transition-colors"
                    :class="currentPage === totalPages ? 'text-text-muted cursor-not-allowed' : 'text-text hover:bg-border/30'"
                    :disabled="currentPage === totalPages"
                    @click="goToPage(currentPage + 1)"
                    aria-label="Next page">Next</button>
            <button type="button"
                    class="px-3 py-1.5 text-sm rounded-lg transition-colors"
                    :class="currentPage === totalPages ? 'text-text-muted cursor-not-allowed' : 'text-text hover:bg-border/30'"
                    :disabled="currentPage === totalPages"
                    @click="goToPage(totalPages)"
                    aria-label="Last page">Last</button>
        </nav>
    </div>
</div>
