{% load static %}
<link rel="stylesheet"
      href="{% static 'css/components/pagination-controls.css' %}">
<div x-show="totalPages > 1" x-cloak class="pagination-controls">
    <div class="flex justify-between items-center">
        <div class="flex items-center gap-3">
            <small class="text-gray-600">
                Showing <span x-text="startItem"></span>-<span x-text="endItem"></span> of <span x-text="totalItems"></span> items
            </small>
            <div x-show="pageSizeOptions && pageSizeOptions.length > 0"
                 x-cloak
                 class="flex items-center gap-2">
                <label class="text-sm text-gray-600 mb-0">Items per page:</label>
                <select x-model="pageSize"
                        @change="handlePageSizeChange($event)"
                        class="px-2 py-1 text-sm border border-gray-300 rounded bg-white focus:outline-none focus:ring-2 focus:ring-brand-primary"
                        style="width: auto;
                               padding-right: 2rem">
                    <template x-for="size in pageSizeOptions" :key="size">
                        <option :value="size" x-text="size"></option>
                    </template>
                </select>
            </div>
        </div>
        <nav aria-label="Pagination">
            <ul class="flex items-center gap-1 mb-0">
                <li :class="{ 'opacity-50 cursor-not-allowed': currentPage === 1 }">
                    <button class="px-3 py-1 text-sm border border-gray-300 rounded hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"
                            :disabled="currentPage === 1"
                            @click="goToPage(1)"
                            aria-label="First page">First</button>
                </li>
                <li :class="{ 'opacity-50 cursor-not-allowed': currentPage === 1 }">
                    <button class="px-3 py-1 text-sm border border-gray-300 rounded hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"
                            :disabled="currentPage === 1"
                            @click="goToPage(currentPage - 1)"
                            aria-label="Previous page">Previous</button>
                </li>
                <template x-for="page in visiblePages" :key="page">
                    <li :class="{ 'opacity-50 cursor-not-allowed': page === '...', 'bg-brand-primary text-white': page === currentPage }">
                        <template x-if="page === '...'">
                            <span class="px-3 py-1 text-sm border border-gray-300 rounded"
                                  x-text="ellipsis"></span>
                        </template>
                        <template x-if="page !== '...'">
                            <button class="px-3 py-1 text-sm border border-gray-300 rounded hover:bg-gray-50"
                                    :class="{ 'bg-brand-primary text-white border-brand-primary hover:bg-brand-primary': page === currentPage }"
                                    @click="goToPage(page)"
                                    :aria-label="`Go to page ${page}`"
                                    x-text="page"></button>
                        </template>
                    </li>
                </template>
                <li :class="{ 'opacity-50 cursor-not-allowed': currentPage === totalPages }">
                    <button class="px-3 py-1 text-sm border border-gray-300 rounded hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"
                            :disabled="currentPage === totalPages"
                            @click="goToPage(currentPage + 1)"
                            aria-label="Next page">Next</button>
                </li>
                <li :class="{ 'opacity-50 cursor-not-allowed': currentPage === totalPages }">
                    <button class="px-3 py-1 text-sm border border-gray-300 rounded hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"
                            :disabled="currentPage === totalPages"
                            @click="goToPage(totalPages)"
                            aria-label="Last page">Last</button>
                </li>
            </ul>
        </nav>
    </div>
</div>
