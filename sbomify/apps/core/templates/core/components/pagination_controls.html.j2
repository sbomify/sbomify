{% load static %}
<link rel="stylesheet"
      href="{% static 'css/components/pagination-controls.css' %}">
<div x-show="totalPages > 1" x-cloak class="pagination-controls">
    <div class="d-flex justify-content-between align-items-center">
        <div class="d-flex align-items-center gap-3">
            <small class="text-muted">
                Showing <span x-text="startItem"></span>-<span x-text="endItem"></span> of <span x-text="totalItems"></span> items
            </small>
            <div x-show="pageSizeOptions && pageSizeOptions.length > 0"
                 x-cloak
                 class="d-flex align-items-center gap-2">
                <label class="small text-muted mb-0">Items per page:</label>
                <select x-model="pageSize"
                        @change="handlePageSizeChange($event)"
                        class="form-select form-select-sm"
                        style="width: auto;
                               padding-right: 2rem">
                    <template x-for="size in pageSizeOptions" :key="size">
                        <option :value="size" x-text="size"></option>
                    </template>
                </select>
            </div>
        </div>
        <nav aria-label="Pagination">
            <ul class="pagination pagination-sm mb-0">
                <li class="page-item" :class="{ disabled: currentPage === 1 }">
                    <button class="page-link"
                            :disabled="currentPage === 1"
                            @click="goToPage(1)"
                            aria-label="First page">First</button>
                </li>
                <li class="page-item" :class="{ disabled: currentPage === 1 }">
                    <button class="page-link"
                            :disabled="currentPage === 1"
                            @click="goToPage(currentPage - 1)"
                            aria-label="Previous page">Previous</button>
                </li>
                <template x-for="page in visiblePages" :key="page">
                    <li class="page-item"
                        :class="{ disabled: page === '...', active: page === currentPage }">
                        <template x-if="page === '...'">
                            <span class="page-link" x-text="ellipsis"></span>
                        </template>
                        <template x-if="page !== '...'">
                            <button class="page-link"
                                    @click="goToPage(page)"
                                    :aria-label="`Go to page ${page}`"
                                    x-text="page"></button>
                        </template>
                    </li>
                </template>
                <li class="page-item" :class="{ disabled: currentPage === totalPages }">
                    <button class="page-link"
                            :disabled="currentPage === totalPages"
                            @click="goToPage(currentPage + 1)"
                            aria-label="Next page">Next</button>
                </li>
                <li class="page-item" :class="{ disabled: currentPage === totalPages }">
                    <button class="page-link"
                            :disabled="currentPage === totalPages"
                            @click="goToPage(totalPages)"
                            aria-label="Last page">Last</button>
                </li>
            </ul>
        </nav>
    </div>
</div>
