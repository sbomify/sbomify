{# Public Product Identifiers - server-rendered #}
{% load static %}
{% if product_identifiers %}
    <div class="public-section" x-data="productIdentifiersBarcodes()">
        <div class="card">
            <div class="card-header">
                <h4 class="card-title">
                    <i class="fas fa-fingerprint"></i>Product Identifiers
                </h4>
            </div>
            <div class="card-body">
                <div class="identifier-cards">
                    {% for identifier in product_identifiers %}
                        <div class="identifier-card" title="{{ identifier.value }}">
                            <div class="identifier-card-type">{{ identifier.identifier_type_display }}</div>
                            {% if identifier.identifier_type in barcode_types %}
                                <div class="identifier-card-barcode"
                                     x-init="renderBarcode('{{ identifier.id }}', '{{ identifier.value }}', '{{ identifier.identifier_type }}')">
                                    <svg data-barcode-id="{{ identifier.id }}"
                                         class="barcode-svg"
                                         x-show="barcodeRendered['{{ identifier.id }}'] && !barcodeErrors['{{ identifier.id }}']">
                                    </svg>
                                    <div class="barcode-state-content"
                                         x-show="!barcodeRendered['{{ identifier.id }}'] && !barcodeErrors['{{ identifier.id }}']">
                                        <i class="fas fa-spinner fa-spin me-1"></i>
                                        <span>Loading...</span>
                                    </div>
                                    <div class="barcode-state-content"
                                         x-show="barcodeErrors['{{ identifier.id }}']">
                                        <i class="fas fa-exclamation-circle me-1"></i>
                                        <span>Invalid</span>
                                    </div>
                                </div>
                            {% else %}
                                <div class="identifier-card-value">{{ identifier.value }}</div>
                            {% endif %}
                        </div>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
{% endif %}
