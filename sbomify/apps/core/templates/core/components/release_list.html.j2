{% load static %}
{% load json_extras %}
<link rel="stylesheet"
      href="{% static 'css/components/release-list.css' %}">
{% if releases %}
    {% if is_public_view %}
        {% url 'core:product_releases_public' '0' as base_url %}
    {% else %}
        {% url 'core:product_releases' '0' as base_url %}
    {% endif %}
    <div class="releases-display"
         x-data="releaseList('{{ document_id }}', '{{ releases|jsonify|escapejs }}')">
        <div class="releases-list">
            <template x-for="release in displayedReleases" :key="release.id">
                <a :href="`{{ base_url }}`.replace('0', release.product_id)"
                   class="release-link">
                    <span class="product-name" x-text="release.product_name"></span>
                    <span class="version-info">
                        <span class="version-text"
                              :class="{ 'is-latest': release.is_latest }"
                              x-text="release.is_latest ? 'latest' : release.name"></span>
                        <span x-show="release.is_prerelease" x-cloak class="prerelease-label">pre</span>
                    </span>
                </a>
            </template>
        </div>
        <div x-show="shouldShowExpansion" x-cloak class="release-expand">
            <div class="release-actions">
                <button class="expand-btn" @click="toggleExpansion" x-text="expandButtonText"></button>
            </div>
        </div>
    </div>
{% else %}
    <div class="empty-releases">
        <span>No releases</span>
    </div>
{% endif %}
