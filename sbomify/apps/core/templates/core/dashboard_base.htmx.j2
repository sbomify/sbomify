{% extends "./base.htmx.j2" %}
{% load static %}
{% load cache %}
{% block title %}sbomify{% endblock %}
{% block main %}
    <!-- AdminKit-style Layout -->
    <div class="wrapper">
        <!-- Sidebar -->
        {% cache 300 'sidebar' request.user.id request.session.current_team.id request.session.user_teams_version request.resolver_match.url_name %}
        {% include "core/components/sidebar.html.j2" %}
    {% endcache %}
    <!-- Main content area -->
    <div class="main">
        <!-- Top navigation -->
        {# Include pending invitations count and teams version in cache key so badge/team updates work #}
        {% cache 300 'header_with_teams' request.user.id request.session.current_team.id pending_invitations_count request.session.user_teams_version %}
        {% include "core/components/topnav.html.j2" %}
    {% endcache %}
    <!-- Main content -->
    <main class="content">
        <div class="container-fluid p-0">
            <div class="messages-container">{% include "core/components/messages.htmx.j2" %}</div>
            {% include "core/components/site_notifications.html.j2" %}
            <!-- Dashboard content -->
            {% block dashboard_content %}{% endblock %}
            <!-- Fallback for templates using 'content' block directly -->
            {% block content %}{% endblock %}
        </div>
    </main>
    <!-- Footer -->
    {% include "core/components/footer.html.j2" %}
</div>
</div>
{% endblock %}
