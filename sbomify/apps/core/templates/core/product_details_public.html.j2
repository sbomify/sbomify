{% extends "core/public_base.htmx.j2" %}
{% load breadcrumb_tags %}
{% load django_vite %}
{% load static %}
{% load public_url_tags %}
{% block title %}{{ product.name }}{% endblock %}
{% block extra_css %}
    <style>
  .meta-chip {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 6px 12px;
    border-radius: 999px;
    background: rgba(var(--brand-color-rgb), 0.05);
    border: 1px solid rgba(var(--brand-color-rgb), 0.1);
    color: var(--brand-color);
    font-weight: 600;
  }
  .meta-row {
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
    margin-top: 8px;
  }
  .title-icon {
    color: var(--brand-color);
  }
    </style>
{% endblock %}
{% block meta_description %}
    {{ product.name }} - Software Bill of Materials (SBOM) for this product. View projects, components, and download SBOMs.
{% endblock %}
{% block breadcrumb %}
    {% breadcrumb product 'product' %}
{% endblock %}
{% block content %}
    <div class="public-page-layout">
        <div class="content-wrapper">
            <div class="content-container">
                <div class="public-page-header">
                    <div class="page-header-content">
                        {% if workspace_public_url %}
                            <div class="mb-2">
                                <a class="btn btn-outline-secondary btn-sm"
                                   href="{{ workspace_public_url }}">
                                    <i class="fas fa-arrow-left me-1"></i> Back to Trust Center
                                </a>
                            </div>
                        {% endif %}
                        <p class="eyebrow text-muted mb-1">Public product</p>
                        <h1 class="page-title">
                            <i class="fas fa-box title-icon"></i>
                            {{ product.name }}
                        </h1>
                        <p class="text-muted mb-1">{{ product.description|default:"No description provided." }}</p>
                        <div class="meta-row">
                            <span class="meta-chip">
                                <i class="fas fa-diagram-project"></i>
                                {{ product.projects|length }} project{{ product.projects|length|pluralize }}
                            </span>
                            <span class="meta-chip">
                                <i class="fas fa-globe"></i>
                                Public
                            </span>
                        </div>
                    </div>
                </div>
                <div class="public-main-content">
                    <div class="content-section">
                        <div class="product-content">
                            <div class="product-identifiers-section">
                                <div class="vc-product-identifiers"
                                     data-product-id="{{ product.id }}"
                                     data-has-crud-permissions="false"
                                     data-billing-plan="business"></div>
                            </div>
                            <div class="product-links-section">
                                <div class="vc-product-links"
                                     data-product-id="{{ product.id }}"
                                     data-has-crud-permissions="false"></div>
                            </div>
                            <div class="product-projects-section">
                                <div class="vc-public-product-projects"
                                     data-product-id="{{ product.id }}"
                                     data-brand-color="{{ brand.primary_color|default:'#4f46e5' }}"
                                     data-accent-color="{{ brand.secondary_color|default:'#7c8b9d' }}"
                                     data-is-custom-domain="{% if is_custom_domain %}true{% else %}false{% endif %}">
                                </div>
                            </div>
                            <div class="product-releases-section">
                                <div class="vc-product-releases"
                                     data-product-id="{{ product.id }}"
                                     data-product-slug="{{ product.slug }}"
                                     data-has-crud-permissions="false"
                                     data-public-view="true"
                                     data-is-custom-domain="{% if is_custom_domain %}true{% else %}false{% endif %}"
                                     data-view-all-url="{% public_url 'core:product_releases_public' product_id=product.id product_slug=product.slug %}">
                                </div>
                            </div>
                            {% if has_downloadable_content %}
                                <div class="download-section">
                                    <div class="vc-public-download-card"
                                         data-title="Download Latest Release"
                                         data-description="Download SBOM from the latest release containing the most current artifacts for this product"
                                         data-download-url="{% url 'core:sbom_download_product' product.id %}"
                                         data-download-text="Download Latest Release"
                                         data-download-icon="fas fa-download"></div>
                                </div>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
{% block scripts %}
    {% vite_asset 'sbomify/apps/core/js/main.ts' %}
    {% vite_asset 'sbomify/apps/sboms/js/main.ts' %}
{% endblock %}
