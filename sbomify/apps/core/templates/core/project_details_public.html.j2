{% extends "core/public_base.htmx.j2" %}
{% load breadcrumb_tags %}
{% load django_vite %}
{% load static %}
{% load public_url_tags %}
{% block title %}{{ project.name }} - SBOM & Security{% endblock %}
{% block meta_description %}
    {{ project.name }} - Software Bill of Materials (SBOM) for this project. View components and download SBOMs.
{% endblock %}
{% block og_title %}{{ project.name }} - Software Bill of Materials{% endblock %}
{% block og_description %}
    {{ project.name }} - View components and download Software Bill of Materials (SBOM) for this project.
{% endblock %}
{% block breadcrumb %}
    {% breadcrumb project 'project' %}
{% endblock %}
{% block content %}
    <div class="public-item-header">
        {% if back_url or fallback_url %}
            <a href="{{ fallback_url|default:back_url }}"
               class="inline-flex items-center gap-2 text-text-muted hover:text-text mb-4 no-underline"
               onclick="if (window.history.length > 1) { window.history.back(); return false; }">
                <i class="fas fa-arrow-left" aria-hidden="true"></i>Back
            </a>
        {% endif %}
        <h1 class="text-3xl font-bold text-text flex items-center gap-4 mb-3">
            <span class="w-12 h-12 rounded-xl bg-info/10 flex items-center justify-center text-info">
                <i class="fas fa-diagram-project"></i>
            </span>
            {{ project.name }}
        </h1>
        {% if public_components %}
            <div class="flex flex-wrap gap-2 mb-6">
                <span class="px-3 py-1.5 text-sm font-medium rounded-full bg-border/50 text-text flex items-center gap-2">
                    <i class="fas fa-cube"></i>
                    {{ public_components|length }} Component{{ public_components|length|pluralize }}
                </span>
            </div>
        {% endif %}
    </div>
    <div class="public-section">
        <div class="tw-card">
            <div class="px-6 py-4 border-b border-border">
                <h4 class="text-lg font-semibold text-text flex items-center gap-2 m-0">
                    <i class="fas fa-cube text-primary"></i>Components
                </h4>
            </div>
            <div class="p-0">
                {% if public_components %}
                    <ul class="list-none p-0 m-0">
                        {% for component in public_components %}
                            <li class="border-b border-border/50 last:border-b-0">
                                <a href="{{ component.public_url }}"
                                   class="flex items-center gap-3 p-4 hover:bg-border/10 transition-colors no-underline text-text">
                                    <span class="w-10 h-10 rounded-lg bg-border/30 flex items-center justify-center text-text-muted">
                                        <i class="fas fa-cube"></i>
                                    </span>
                                    <span class="flex-1 font-medium">{{ component.name }}</span>
                                    <span class="px-2 py-1 text-xs rounded bg-border/50 text-text-muted">{{ component.component_type_display }}</span>
                                    <i class="fas fa-chevron-right text-text-muted"></i>
                                </a>
                            </li>
                        {% endfor %}
                    </ul>
                {% else %}
                    <div class="text-center py-10 text-text-muted">
                        <i class="fas fa-cube text-4xl mb-4 opacity-50"></i>
                        <p class="m-0">No public components in this project</p>
                    </div>
                {% endif %}
            </div>
        </div>
    </div>
{% endblock %}
{% block scripts %}
    {% vite_asset 'sbomify/apps/core/js/main.ts' %}
{% endblock %}
