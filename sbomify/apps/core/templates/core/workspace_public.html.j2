{% extends "core/public_base.htmx.j2" %}
{% load static %}
{% load django_vite %}
{% load public_url_tags %}
{% load humanize %}
{% block title %}{{ workspace.name }} Trust Center{% endblock %}
{% block meta_description %}
    {{ workspace.name }} Trust Center: browse public products, releases, and organization-wide compliance artifacts.
{% endblock %}
{% block og_title %}{{ workspace.name }} Trust Center{% endblock %}
{% block og_description %}
    {{ workspace.name }} Trust Center: browse public products, releases, and organization-wide compliance artifacts.
{% endblock %}
{% block content %}
    <!-- Hero Section -->
    <div class="bg-surface rounded-xl p-8 mb-6 shadow-md relative overflow-hidden">
        <div class="absolute -top-1/2 -right-[30%] w-[600px] h-[600px] bg-[radial-gradient(circle,rgba(var(--brand-color-rgb,var(--brand-primary-rgb)),0.08)_0%,transparent_70%)] pointer-events-none">
        </div>
        <div class="relative z-[1]">
            <div class="uppercase tracking-[0.15em] text-xs font-bold text-primary mb-4 inline-flex items-center gap-2 bg-primary/10 px-3 py-1.5 rounded-lg">
                <span class="w-1.5 h-1.5 bg-primary rounded-full"></span>
                TRUST CENTER
            </div>
            <h1 class="text-2xl font-bold text-text mb-2">{{ workspace.name }} Trust Center</h1>
            <p class="text-lg text-text-muted leading-relaxed mb-6 max-w-[800px]">
                {% if brand.trust_center_description %}
                    {{ brand.trust_center_description }}
                {% else %}
                    Your centralized hub for transparency and compliance. Browse our public products, releases, and organization-wide security artifacts.
                {% endif %}
            </p>
            <div class="flex gap-3 flex-wrap">
                {% if products %}
                    <div class="bg-border/30 border border-border text-text rounded-xl px-4 py-3 inline-flex items-center gap-3 font-semibold shadow-sm hover:bg-border/50 hover:-translate-y-0.5 hover:shadow-md transition-all">
                        <span class="w-8 h-8 flex items-center justify-center bg-primary/10 rounded-lg text-primary">
                            <i class="fas fa-cube"></i>
                        </span>
                        <span class="font-bold text-primary">{{ products|length }}</span>
                        <span class="text-text-muted font-medium">Product{{ products|length|pluralize }}</span>
                    </div>
                {% endif %}
                {% if global_components %}
                    <div class="bg-border/30 border border-border text-text rounded-xl px-4 py-3 inline-flex items-center gap-3 font-semibold shadow-sm hover:bg-border/50 hover:-translate-y-0.5 hover:shadow-md transition-all">
                        <span class="w-8 h-8 flex items-center justify-center bg-primary/10 rounded-lg text-primary">
                            <i class="fas fa-award"></i>
                        </span>
                        <span class="font-bold text-primary">{{ global_components|length }}</span>
                        <span class="text-text-muted font-medium">Compliance Artifact{{ global_components|length|pluralize }}</span>
                    </div>
                {% endif %}
            </div>
        </div>
    </div>
    {% if products %}
        <!-- Products Section -->
        <div class="bg-surface rounded-xl p-8 mb-6 shadow-md">
            <div class="mb-6 pb-4 border-b border-border">
                <h2 class="text-xl font-semibold text-text mb-1 flex items-center gap-2">
                    <i class="fas fa-cube text-primary"></i>Products
                </h2>
                <p class="text-sm text-text-muted m-0">Explore our products and their software bill of materials (SBOMs)</p>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                {% for product in products %}
                    <div class="bg-border/20 rounded-xl p-5 h-full flex flex-col transition-all hover:bg-border/30 hover:-translate-y-0.5 hover:shadow-sm">
                        <div class="flex justify-between items-start mb-3 gap-2">
                            <h3 class="text-lg font-semibold text-text m-0 leading-tight flex-1">{{ product.name }}</h3>
                            <span class="px-2 py-1 text-xs font-semibold rounded-lg bg-border/50 text-text-muted">{{ product.project_count }} Project{{ product.project_count|pluralize }}</span>
                        </div>
                        {% if product.description %}
                            <p class="text-sm text-text-muted leading-relaxed flex-grow mb-3">{{ product.description }}</p>
                        {% endif %}
                        <div class="flex justify-between items-center mt-auto pt-3 border-t border-border">
                            <div class="flex items-center gap-2">
                                <span class="px-2 py-1 text-xs font-semibold rounded-lg bg-warning/15 text-warning flex items-center gap-1">
                                    <i class="fas fa-tag"></i>Product
                                </span>
                                {% if product.passing_assessments %}
                                    <div class="flex items-center gap-1">
                                        {% for assessment in product.passing_assessments %}
                                            {% include 'plugins/components/public_assessment_icon.html.j2' with assessment=assessment %}
                                        {% endfor %}
                                    </div>
                                {% endif %}
                            </div>
                            <a class="tw-btn-primary text-sm py-1.5 px-3"
                               href="{% public_url 'core:product_details_public' product_id=product.id product_slug=product.slug %}">
                                View Details <i class="fas fa-arrow-right ml-1"></i>
                            </a>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>
    {% endif %}
    {% if global_components %}
        <!-- Workspace Artifacts Section -->
        <div class="bg-surface rounded-xl p-8 shadow-md">
            <div class="mb-6 pb-4 border-b border-border">
                <h2 class="text-xl font-semibold text-text mb-1 flex items-center gap-2">
                    <i class="fas fa-award text-primary"></i>Organization Compliance Artifacts
                </h2>
                <p class="text-sm text-text-muted m-0">
                    Organization-wide compliance documents, certifications, and security attestations
                </p>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                {% for component in global_components %}
                    <div class="bg-border/20 rounded-xl p-5 h-full flex flex-col transition-all hover:bg-border/30 hover:-translate-y-0.5 hover:shadow-sm">
                        <div class="flex justify-between items-start mb-3 gap-2">
                            <h3 class="text-lg font-semibold text-text m-0 leading-tight flex-1">{{ component.name }}</h3>
                            <span class="px-2 py-1 text-xs font-semibold rounded-lg bg-warning/15 text-warning">{{ component.component_type_display }}</span>
                        </div>
                        <p class="text-sm text-text-muted leading-relaxed flex-grow mb-3">
                            Organization-level compliance artifact available across the entire organization.
                        </p>
                        <div class="flex justify-between items-center mt-auto pt-3 border-t border-border">
                            <span class="px-2 py-1 text-xs font-semibold rounded-lg bg-primary/10 text-primary flex items-center gap-1">
                                <i class="fas fa-building"></i>
                                Organization-Wide
                            </span>
                            <a class="tw-btn-primary text-sm py-1.5 px-3"
                               href="{% public_url 'core:component_details_public' component_id=component.id component_slug=component.slug %}">
                                View Details <i class="fas fa-arrow-right ml-1"></i>
                            </a>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>
    {% endif %}
{% endblock %}
{% block scripts %}
    {% vite_asset 'sbomify/apps/core/js/main.ts' %}
{% endblock %}
