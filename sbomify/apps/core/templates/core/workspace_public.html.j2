{% extends "core/public_base.htmx.j2" %}
{% load static %}
{% load django_vite %}
{% load public_url_tags %}
{% load humanize %}
{% block title %}{{ workspace.name }} Trust Center{% endblock %}
{% block meta_description %}
    {{ workspace.name }} Trust Center: browse public products, releases, and organization-wide compliance artifacts.
{% endblock %}
{% block og_title %}{{ workspace.name }} Trust Center{% endblock %}
{% block og_description %}
    {{ workspace.name }} Trust Center: browse public products, releases, and organization-wide compliance artifacts.
{% endblock %}
{% block extra_css %}
    <style>
    /* Hero Section - uses design tokens */
    .workspace-hero {
        background: var(--surface-card);
        border-radius: var(--radius-xl);
        padding: var(--spacing-xl);
        margin-bottom: var(--spacing-lg);
        box-shadow: var(--shadow-md);
        position: relative;
        overflow: hidden;
    }

    .workspace-hero::before {
        content: '';
        position: absolute;
        top: -50%;
        right: -30%;
        width: 600px;
        height: 600px;
        background: radial-gradient(circle, rgba(var(--brand-color-rgb), 0.08) 0%, transparent 70%);
        pointer-events: none;
    }

    .workspace-hero-content {
        position: relative;
        z-index: 1;
    }

    .workspace-hero .eyebrow {
        text-transform: uppercase;
        letter-spacing: 0.15em;
        font-size: var(--font-size-xs);
        font-weight: var(--font-weight-bold);
        color: var(--brand-color, var(--brand-primary));
        margin-bottom: var(--spacing-md);
        display: inline-flex;
        align-items: center;
        gap: var(--spacing-sm);
        background: rgba(var(--brand-color-rgb, var(--brand-primary-rgb)), 0.1);
        padding: var(--spacing-sm) var(--spacing-md);
        border-radius: var(--radius-md);
    }

    .workspace-hero .eyebrow::before {
        content: '';
        width: 6px;
        height: 6px;
        background: var(--brand-color, var(--brand-primary));
        border-radius: 50%;
    }

    .workspace-hero h1 {
        color: var(--text-title);
        font-weight: var(--font-weight-bold);
        font-size: var(--font-size-2xl);
        margin-bottom: var(--spacing-sm);
        line-height: 1.2;
    }

    .workspace-hero-description {
        font-size: var(--font-size-lg);
        color: var(--text-secondary);
        line-height: var(--line-height-relaxed);
        margin-bottom: var(--spacing-lg);
        max-width: 800px;
    }

    .meta-chip {
        background: var(--gray-50);
        border: 1px solid var(--border-color-light);
        color: var(--text-title);
        border-radius: var(--radius-lg);
        padding: var(--spacing-md) var(--spacing-lg);
        display: inline-flex;
        align-items: center;
        gap: var(--spacing-md);
        font-size: var(--font-size-base);
        font-weight: var(--font-weight-semibold);
        transition: all var(--transition-fast);
        box-shadow: var(--shadow-sm);
    }

    .meta-chip:hover {
        background: var(--gray-100);
        transform: translateY(-2px);
        box-shadow: var(--shadow-md);
    }

    .meta-chip i {
        color: var(--brand-color, var(--brand-primary));
        font-size: var(--font-size-lg);
        width: 32px;
        height: 32px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: rgba(var(--brand-color-rgb, var(--brand-primary-rgb)), 0.1);
        border-radius: var(--radius-md);
    }

    .meta-chip-number {
        font-weight: var(--font-weight-bold);
        color: var(--brand-color, var(--brand-primary));
    }

    .meta-chip-label {
        color: var(--text-secondary);
        font-weight: var(--font-weight-medium);
    }

    /* Content Sections */
    .content-section {
        background: var(--surface-card);
        border-radius: var(--radius-xl);
        padding: var(--spacing-xl);
        margin-bottom: var(--spacing-lg);
        box-shadow: var(--shadow-md);
    }

    .content-section:last-child {
        margin-bottom: 0;
    }

    .section-header {
        margin-bottom: var(--spacing-lg);
        padding-bottom: var(--spacing-md);
        border-bottom: 1px solid var(--border-color-light);
    }

    .section-title {
        color: var(--text-title);
        font-weight: var(--font-weight-semibold);
        font-size: 1.25rem;
        margin-bottom: var(--spacing-xs);
    }

    .section-title i {
        color: var(--brand-color, var(--brand-primary));
    }

    .section-subtitle {
        color: var(--text-muted);
        font-size: var(--font-size-sm);
        line-height: var(--line-height-normal);
        margin: 0;
    }

    /* Glass Cards */
    .glass-card {
        background: var(--gray-50);
        border-radius: var(--radius-lg);
        padding: var(--spacing-lg);
        height: 100%;
        display: flex;
        flex-direction: column;
        transition: all var(--transition-fast);
    }

    .glass-card:hover {
        background: var(--gray-100);
        transform: translateY(-2px);
        box-shadow: var(--shadow-sm);
    }

    .card-header-section {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        margin-bottom: var(--spacing-md);
        gap: var(--spacing-sm);
    }

    .card-title {
        color: var(--text-title);
        font-weight: var(--font-weight-semibold);
        font-size: var(--font-size-lg);
        margin: 0;
        line-height: 1.3;
        flex: 1;
    }

    .card-description {
        color: var(--text-secondary);
        font-size: var(--font-size-sm);
        line-height: var(--line-height-relaxed);
        flex-grow: 1;
        margin-bottom: var(--spacing-md);
    }

    .card-footer-section {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: auto;
        padding-top: var(--spacing-md);
        border-top: 1px solid var(--border-color-light);
    }

    /* Badges - local overrides to match design */
    .badge {
        padding: 0.375rem 0.75rem;
        border-radius: var(--radius-md);
        font-size: var(--font-size-xs);
        font-weight: var(--font-weight-semibold);
    }

    .badge-count {
        background: var(--gray-100);
        color: var(--text-secondary);
    }

    .badge-type {
        background: rgba(var(--brand-warning-rgb), 0.15);
        color: #92400e;
    }

    .badge-workspace {
        background: rgba(var(--brand-color-rgb, var(--brand-primary-rgb)), 0.1);
        color: var(--brand-color, var(--brand-primary));
        display: inline-flex;
        align-items: center;
        gap: 0.375rem;
    }

    /* View Button */
    .btn-view {
        background: var(--brand-color, var(--brand-primary));
        border: none;
        color: var(--white);
        padding: var(--spacing-sm) var(--spacing-md);
        border-radius: var(--radius-md);
        font-weight: var(--font-weight-semibold);
        font-size: var(--font-size-sm);
        transition: all var(--transition-fast);
        text-decoration: none;
        display: inline-flex;
        align-items: center;
    }

    .btn-view:hover {
        opacity: 0.9;
        transform: translateY(-1px);
        color: var(--white);
    }

    /* Responsive */
    @media (max-width: 576px) {
        .workspace-hero {
            padding: var(--spacing-lg);
        }

        .workspace-hero h1 {
            font-size: var(--font-size-xl);
        }

        .meta-chip {
            font-size: var(--font-size-sm);
            padding: var(--spacing-sm) var(--spacing-md);
        }

        .content-section {
            padding: var(--spacing-lg);
        }

        .glass-card {
            padding: var(--spacing-md);
        }
    }
    </style>
{% endblock %}
{% block content %}
    <!-- Hero Section -->
    <div class="workspace-hero">
        <div class="workspace-hero-content">
            <div class="eyebrow">TRUST CENTER</div>
            <h1>{{ workspace.name }} Trust Center</h1>
            <p class="workspace-hero-description">
                {% if brand.trust_center_description %}
                    {{ brand.trust_center_description }}
                {% else %}
                    Your centralized hub for transparency and compliance. Browse our public products, releases, and organization-wide security artifacts.
                {% endif %}
            </p>
            <div class="d-flex gap-3 flex-wrap">
                {% if products %}
                    <div class="meta-chip">
                        <i class="fas fa-cube"></i>
                        <span class="meta-chip-number">{{ products|length }}</span>
                        <span class="meta-chip-label">product{{ products|length|pluralize }}</span>
                    </div>
                {% endif %}
                {% if global_components %}
                    <div class="meta-chip">
                        <i class="fas fa-award"></i>
                        <span class="meta-chip-number">{{ global_components|length }}</span>
                        <span class="meta-chip-label">compliance artifact{{ global_components|length|pluralize }}</span>
                    </div>
                {% endif %}
            </div>
        </div>
    </div>
    {% if products %}
        <!-- Products Section -->
        <div class="content-section">
            <div class="section-header">
                <h2 class="section-title">
                    <i class="fas fa-cube me-2"></i>Products
                </h2>
                <p class="section-subtitle">Explore our products and their software bill of materials (SBOMs)</p>
            </div>
            <div class="row g-4">
                {% for product in products %}
                    <div class="col-md-6 col-lg-4">
                        <div class="glass-card">
                            <div class="card-header-section">
                                <h3 class="card-title">{{ product.name }}</h3>
                                <span class="badge badge-count">{{ product.project_count }} project{{ product.project_count|pluralize }}</span>
                            </div>
                            {% if product.description %}<p class="card-description">{{ product.description }}</p>{% endif %}
                            <div class="card-footer-section">
                                <span class="badge badge-type">
                                    <i class="fas fa-tag me-1"></i>Product
                                </span>
                                <a class="btn-view"
                                   href="{% public_url 'core:product_details_public' product_id=product.id product_slug=product.slug %}">
                                    View Details <i class="fas fa-arrow-right ms-1"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>
    {% endif %}
    {% if global_components %}
        <!-- Workspace Artifacts Section -->
        <div class="content-section">
            <div class="section-header">
                <h2 class="section-title">
                    <i class="fas fa-award me-2"></i>Organization Compliance Artifacts
                </h2>
                <p class="section-subtitle">Organization-wide compliance documents, certifications, and security attestations</p>
            </div>
            <div class="row g-4">
                {% for component in global_components %}
                    <div class="col-md-6 col-lg-4">
                        <div class="glass-card">
                            <div class="card-header-section">
                                <h3 class="card-title">{{ component.name }}</h3>
                                <span class="badge badge-type">{{ component.component_type_display }}</span>
                            </div>
                            <p class="card-description">Organization-level compliance artifact available across the entire organization.</p>
                            <div class="card-footer-section">
                                <span class="badge badge-workspace">
                                    <i class="fas fa-building"></i>
                                    Organization-Wide
                                </span>
                                <a class="btn-view"
                                   href="{% public_url 'core:component_details_public' component_id=component.id component_slug=component.slug %}">
                                    View Details <i class="fas fa-arrow-right ms-1"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>
    {% endif %}
{% endblock %}
{% block scripts %}
    {% vite_asset 'sbomify/apps/core/js/main.ts' %}
{% endblock %}
