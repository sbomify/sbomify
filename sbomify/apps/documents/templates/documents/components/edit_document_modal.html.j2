<div class="fixed inset-0 z-modal overflow-y-auto"
     id="edit-document-modal"
     tabindex="-1"
     aria-labelledby="editDocumentModalLabel"
     x-cloak
     x-data="{ editModalOpen: false }"
     x-show="editModalOpen"
     x-trap.inert.noscroll="editModalOpen"
     @keydown.escape.window="editModalOpen = false"
     @open-modal.window="if ($event.detail.id === 'edit-document-modal') editModalOpen = true"
     :aria-hidden="!editModalOpen"
     style="display: none">
    <div class="modal-backdrop-overlay transition-opacity"
         x-show="editModalOpen"
         x-transition:enter="ease-out duration-300"
         x-transition:enter-start="opacity-0"
         x-transition:enter-end="opacity-100"
         x-transition:leave="ease-in duration-200"
         x-transition:leave-start="opacity-100"
         x-transition:leave-end="opacity-0"
         @click="editModalOpen = false"></div>
    <div class="flex min-h-full items-center justify-center p-4">
        <div class="relative mx-auto my-8 w-full max-w-md transform overflow-hidden rounded-lg bg-white shadow-xl transition-all"
             x-show="editModalOpen"
             x-transition:enter="ease-out duration-300"
             x-transition:enter-start="opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"
             x-transition:enter-end="opacity-100 translate-y-0 sm:scale-100"
             x-transition:leave="ease-in duration-200"
             x-transition:leave-start="opacity-100 translate-y-0 sm:scale-100"
             x-transition:leave-end="opacity-0 translate-y-4 sm:scale-95"
             @click.stop>
            <div class="px-6 py-4 border-b flex justify-between items-center">
                <h5 class="text-lg font-semibold" id="editDocumentModalLabel">Edit Document</h5>
                <button type="button"
                        class="text-gray-400 hover:text-gray-600 focus:outline-none"
                        @click="editModalOpen = false"
                        aria-label="Close">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <form hx-post="{% url 'documents:documents_table' component_id %}"
                  hx-disabled-elt="find button[type='submit']"
                  hx-swap="none">
                {% csrf_token %}
                <div class="px-6 py-4">
                    <input type="hidden" name="_method" value="PATCH">
                    <input type="hidden" name="document_id" x-model="editForm.document_id">
                    <div class="mb-4">
                        <label for="edit-document-name"
                               class="block text-sm font-medium text-gray-700 mb-1">
                            Name <span class="text-danger-500">*</span>
                        </label>
                        <input type="text"
                               class="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-brand-primary focus:border-transparent"
                               id="edit-document-name"
                               name="name"
                               x-model="editForm.name"
                               required>
                    </div>
                    <div class="mb-4">
                        <label for="edit-document-version"
                               class="block text-sm font-medium text-gray-700 mb-1">
                            Version <span class="text-danger-500">*</span>
                        </label>
                        <input type="text"
                               class="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-brand-primary focus:border-transparent"
                               id="edit-document-version"
                               name="version"
                               x-model="editForm.version"
                               required>
                    </div>
                    <div class="mb-4">
                        <label for="edit-document-type"
                               class="block text-sm font-medium text-gray-700 mb-1">
                            Document Type <span class="text-danger-500">*</span>
                        </label>
                        <select class="w-full px-3 py-2 border border-gray-300 rounded bg-white focus:outline-none focus:ring-2 focus:ring-brand-primary"
                                id="edit-document-type"
                                name="document_type"
                                x-model="editForm.document_type"
                                required>
                            <option value="">Select a type...</option>
                            {% for value, label in document_type_choices %}<option value="{{ value }}">{{ label }}</option>{% endfor %}
                        </select>
                    </div>
                    <div class="mb-4">
                        <label for="edit-document-description"
                               class="block text-sm font-medium text-gray-700 mb-1">Description</label>
                        <textarea class="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-brand-primary focus:border-transparent"
                                  id="edit-document-description"
                                  name="description"
                                  rows="3"
                                  x-model="editForm.description"></textarea>
                    </div>
                </div>
                <div class="px-6 py-4 border-t flex justify-end gap-2">
                    <button type="button"
                            class="modal-btn-secondary px-4 py-2 border border-gray-300 text-gray-700 rounded hover:bg-gray-50 transition-colors"
                            @click="editModalOpen = false">Cancel</button>
                    <button type="submit"
                            class="modal-btn-primary px-4 py-2 bg-brand-primary text-white rounded hover:opacity-90 transition-opacity"
                            @click="editModalOpen = false">
                        <span>Save Changes</span>
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>
